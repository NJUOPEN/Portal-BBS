<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <link rel="stylesheet" href="./css/stylesheet-general.css" type="text/css">
    <link rel="stylesheet" href="./css/stylesheet-infomation.css" type="text/css">
    <script src="./JS/jquery.min.js"></script>
</head>
<body>

<!-- head -->
<div id="container">
    <div class="info-body-field">
        <h1 class="info-welcome-words">
            更改你的用户信息
        </h1>
        <div class="text-info-field">
	    <form action="?" method="POST">
                <ul>
                    <li class="info-form-list">
		      <input type="text" value="<?=$usrInfoList['Name'] ?>" readonly class="info-form-list-input"/>
                      <span>用户名</span>
                    </li>
                    <li class ="info-form-list">
		      <input type="text" name="newEmail" value="<?=$usrInfoList['Email'] ?>" class="info-form-list-input" />
                      <span>* 电子邮箱</span>
                    </li>
                    <li class ="info-form-list">
                        <input type="password" name="newPW" class="info-form-list-input"/>
                        <span>* 新密码</span>
                    </li>
                    <li class="info-form-list">
                        <input type="password" name="checkPW" class="info-form-list-input"/>
                        <span>* 重复密码</span>
                    </li>
                    <li class="info-form-list">
                        <input type="password" name="curPW" class="info-form-list-input"/>
                        <span>* 旧密码</span>
                    </li>
                    <li class="info-form-list">
                        <span>注：带*号的可不填</span>
                    </li>
                    <li class="info-form-list">
			<input type="hidden" name="INFO_ACTION" value="change_info" />
			<input type="hidden" name="action" value="information" />
			<input type="submit" value="提交" id="info-submit"/>
                    </li>
                </ul>
            </form>
	    <form action='?' method='POST' class='info-cancel'>
		<input type='hidden' name='action' value='' />
		<input type='submit' value='返回' id='info-submit' />
	    </form>
	    <div id="info-sysMsg"></div>
        </div>
<!-- info-field -->
        <div class="pic-info-field">
            <div>上传新头像</div>
            <hr width="90%" align="left" />
            <div class="pic-input-field">                
                <div  class="pic-input-frame">
                    <img src="" id="img2show" name="img2show" />
                </div>
                <form action='' method='POST' enctype="multipart/form-data" >
                    <input type="file" name="imgUP" id="imgUP" />
                    <input type="hidden" name="action" value="change_avatar" />
                    <input type="submit" value='提交' id="pic-submit" />
                </form>
            </div>

            <div >
                <img src="<?=$_SESSION['avatar'] ?>" class="used-pic-1"/>
                <!--<img class="used-pic-2"/>-->
                <span class="used-pic-text">
                    当前头像
                </span>
            </div>

        </div>
   	<script>
    /**
     * 参考来源：https://dl.dropboxusercontent.com/u/19427089/temp/imagePreview.htm
     * 使用HTML5 File API, 來即時預覽image
     */
    $("#imgUP").change(function(){
        var objUrl = getObjectURL(this.files[0]) ;
        console.log("objUrl = "+objUrl) ;
        if (objUrl) {
            $("#img2show").attr("src", objUrl) ;
        }
    }) ;
   	/**
	 * 建立一個可存取到該file的url
	 * PS: 瀏覽器必須支援HTML5 File API
	 */
	function getObjectURL(file) {
		var url = null ; 
		if (window.createObjectURL!=undefined) { // basic
			url = window.createObjectURL(file) ;
		} else if (window.URL!=undefined) { // mozilla(firefox)
			url = window.URL.createObjectURL(file) ;
		} else if (window.webkitURL!=undefined) { // webkit or chrome
			url = window.webkitURL.createObjectURL(file) ;
		}
		return url ;
	}

	
	</script>
    </div>
</div>
<!-- pic-field -->

</body>
</html>

<!-- footer -->
